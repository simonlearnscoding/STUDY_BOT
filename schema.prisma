enum SessionStatus {
  ONGOING
  COMPLETED
}

enum Pillar {
  THINKER
  DISCIPLINE
  PHYSICAL_WORK
}

model User {
  id           BigInt        @id @default(autoincrement())
  name         String
  sessions     Session[]
  activityLogs ActivityLog[]
  userLevels   UserLevel[]
}

model ActivityType {
  id           BigInt        @id @default(autoincrement())
  name         String
  pillar       Pillar
  activityLogs ActivityLog[]
}

model VCType {
  id           BigInt        @id @default(autoincrement())
  name         String
  activityLogs ActivityLog[]
}

model Session {
  id           BigInt        @id @default(autoincrement())
  user         User          @relation(fields: [userId], references: [id])
  joinedAt     DateTime      @default(now())
  leftAt       DateTime?
  activityLogs ActivityLog[]
  duration     Int           @default(0)
  userId       BigInt
  status       SessionStatus @default(ONGOING)
}

model ActivityLog {
  id             BigInt        @id @default(autoincrement())
  user           User          @relation(fields: [userId], references: [id])
  session        Session       @relation(fields: [sessionId], references: [id])
  activityType   ActivityType  @relation(fields: [activityTypeId], references: [id])
  vcType         VCType        @relation(fields: [vcTypeId], references: [id])
  joinedAt       DateTime      @default(now())
  leftAt         DateTime?
  duration       Int           @default(0)
  xp             Int
  status         SessionStatus @default(ONGOING)
  userId         BigInt
  sessionId      BigInt
  activityTypeId BigInt
  vcTypeId       BigInt
}

model UserLevel {
  id     BigInt @id @default(autoincrement())
  user   User   @relation(fields: [userId], references: [id])
  pillar Pillar
  level  Int    @default(1)
  xp     Int    @default(0)
  userId BigInt
}

model Role {
  id       BigInt @id @default(autoincrement())
  name     String
  minLevel Int
  pillar   Pillar
}

enum RoleName {
  INERTUS // Consistent with nothing
  GLADIATOR // Consistent with PHYSICAL_WORK
  LEGIONARY // Consistent with DISCIPLINE
  PHILOSOPHER // Consistent with THINKER
  SENATOR // Consistent with DISCIPLINE and THINKER
  CENTURION // Consistent with DISCIPLINE and PHYSICAL_WORK
  ATHENAEUM // Consistent with PHYSICAL_WORK and THINKER
  IMPERATOR // Consistent with everything
}

